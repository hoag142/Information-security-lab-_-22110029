# 22110029-Trần Huy Hoàng
# 4.1. Encrypt and Decrypt Text file

Create text file with random content

![image](https://github.com/user-attachments/assets/90f97aa1-2f05-4fe3-8d9f-a6a6e78f9e1d)


![image](https://github.com/user-attachments/assets/a422be71-4f11-456b-9ac3-7b2760bed124)

- **With ecb** :

*Encrypted*:

![image](https://github.com/user-attachments/assets/ccdad4eb-1cd4-4ec9-8392-f49635cfa240)

*Checking encrypted file text :*

![image](https://github.com/user-attachments/assets/06e9453a-b602-4dae-af2b-5327362172d1)

*Decrypted:*

![image](https://github.com/user-attachments/assets/9b66404c-7b9d-47ac-9708-3f28997568dc)

*Checking decrypted file text :*

![image](https://github.com/user-attachments/assets/c681d6b7-9ef9-4de7-a642-c685eb4e155e)

The result show the same content with plaintext so decrypted **success**!

  
- **With cbc** :

*Encrypted*:

![image](https://github.com/user-attachments/assets/16fe90c8-3675-47ad-9206-eb0cf51c3129)

*Checking encrypted file text :*

![image](https://github.com/user-attachments/assets/5424c69b-514f-4850-ab24-43936f6f3250)


*Decrypted:*

![image](https://github.com/user-attachments/assets/814203a8-e7af-4ec2-8066-fed7bd472b3b)


*Checking decrypted file text :*


![image](https://github.com/user-attachments/assets/60ef646a-f8cc-48cb-8a6c-82c4de2b8593)

The result show the same content with plaintext so decrypted **success**!

# 4.2 Encryption Mode – ECB vs. CBC

Split the BMP file into its header and body using `dd`.

![image](https://github.com/user-attachments/assets/9798357d-8171-4f2e-ae2f-8d786406d00b)


- **Encrypted the Body using AES-256-ECB**:

![image](https://github.com/user-attachments/assets/5fc20b38-78e6-4779-90da-7f58e30fab76)
 **Combine the Header and Encrypted Body for ECB**

 ![image](https://github.com/user-attachments/assets/cfb8107a-d399-4f62-9f24-4482a87855a8)

 **Compare picture after encrypted**

 ![image](https://github.com/user-attachments/assets/c86d470c-0804-49d1-ab6f-9af882f8571c)

*Recognition of Shapes:*

- Despite the encryption, the dolphin shape is still visible. This is because ECB mode encrypts identical plaintext blocks to identical ciphertext blocks. Therefore, any repeating pattern in the image results in a repeating pattern in the encrypted output.
*Pattern Leakage:*

- The structure and edges of the dolphin are recognizable. This happens because ECB does not alter the block patterns, meaning regions of the image that are the same before encryption remain visibly similar after encryption.
*Color Artifacts:*

- The encrypted image displays strange color bands and artifacts. These are caused by the encryption of individual blocks without consideration for adjacent blocks, leading to a non-uniform and patchy appearance.

***Explaination:***

ECB mode encrypts each block of data independently, which is effective for text data but not for image data where patterns are crucial. In images, the visual continuity means that blocks are often similar, leading to the same encrypted blocks and hence visible patterns.


- **Encrypt using AES-256-CBC**:

  ![image](https://github.com/user-attachments/assets/f103e96f-8424-47cf-a1cc-cc88a46e03c8)

 **Combine the Header and Encrypted Body for CBC**

![image](https://github.com/user-attachments/assets/9259e3f9-b833-4c72-978a-e28ea1e08325)

 **Compare picture after encrypted**

![image](https://github.com/user-attachments/assets/8369034c-44c8-46e7-8473-ae3bbcf89c1d)

The image will typically appear as random noise or scrambled patterns. This is due to CBC mode’s chaining effect and randomization.

**Conclusion:**

- **ECB Mode** often shows recognizable patterns or blocks from the original image because it encrypts each block of plaintext independently.
- **CBC Mode** provides better visual results because it uses an initialization vector and ensures that each block of plaintext is affected by previous blocks.

  
